# 🏪 QuickShop - מתחרה לשופיפיי

## 🎯 חזון המוצר

**פלטפורמת SaaS ליצירת חנויות מקוונות** - חלופה ישראלית לשופיפיי.

| שופיפיי | QuickShop (אנחנו) |
|---------|-------------------|
| איטי (React hydration כבד) | ⚡ מהיר כמו PHP |
| מחיר גבוה ($29+/חודש) | מחיר תחרותי |image.png
| באנגלית | 🇮🇱 עברית RTL מובנה |
| תבניות מהקהילה | אנחנו יוצרים תבניות |
| Liquid (שפה מיוחדת) | React/Next.js |

---

## 🏗️ עקרונות ארכיטקטורה - "מהיר כמו PHP"

### 1. Server Components 80%+
```
┌─────────────────────────────────────────────────────────────┐
│  כל דף = Server Component                                   │
│  HTML מוכן מהשרת → אין hydration כבד → אפס לאגים            │
├─────────────────────────────────────────────────────────────┤
│  "use client" רק ל:                                         │
│  • כפתור "הוסף לעגלה"                                       │
│  • טופס חיפוש                                               │
│  • סלקטור וריאנט (צבע/מידה)                                 │
│  • מונה כמות                                                │
│  • תפריט המבורגר (מובייל)                                   │
└─────────────────────────────────────────────────────────────┘
```

### 2. לחיצה = עמוד מיידי
```
• Link prefetch - Next.js טוען לינקים מראש
• ISR caching - דפי מוצרים מוכנים מראש
• Streaming - תוכן נטען בחלקים
• אין state גלובלי מורכב - הכל מגיע מהשרת
```

### 3. DB מהיר על Serverless
```
Neon PostgreSQL + Connection Pooling
→ כל request מקבל חיבור מוכן
→ אין latency של פתיחת חיבור
→ מרגיש מיידי
```

### 4. Optimistic UI
```
לחיצה על "הוסף לעגלה":
1. מיד מראים +1 בעגלה (optimistic)
2. ברקע: Server Action שומר ל-DB
3. אם נכשל - מחזירים אחורה

התוצאה: מרגיש כמו אפליקציה, לא כמו אתר
```

---

## 👥 סוגי משתמשים

### 1. 🔧 Platform Admin (אנחנו)
| יכולת | תיאור |
|-------|--------|
| ניהול תבניות | יצירה ועריכת תבניות לחנויות |
| ניהול מנויים | צפייה בכל החנויות, חיובים |
| תמיכה | טיפול בפניות |
| אנליטיקס | נתונים על כל הפלטפורמה |

### 2. 🛍️ Merchant (בעל חנות)
| יכולת | תיאור |
|-------|--------|
| ניהול חנות | הגדרות, לוגו, צבעים, דומיין |
| מוצרים | CRUD, וריאנטים, תמונות, מלאי |
| קטגוריות | ארגון מוצרים |
| הזמנות | צפייה, עדכון סטטוס, הדפסה |
| לקוחות | רשימה, היסטוריה |
| קופונים | יצירה וניהול הנחות |
| דוחות | מכירות, מוצרים פופולריים |
| הגדרות | משלוח, מיסים, תשלום |

### 3. 🛒 Customer (קונה)
| יכולת | תיאור |
|-------|--------|
| גלישה | צפייה במוצרים וקטגוריות |
| חיפוש | חיפוש מוצרים |
| עגלה | הוספה, עדכון כמות, מחיקה |
| צ'קאאוט | הזנת פרטים ותשלום |
| הזמנות | מעקב אחר הזמנות |
| חשבון | פרטים אישיים (אופציונלי) |

### 4. 👑 Influencer (משפיענית)

משפיענית היא שותפה שיווקית שמקבלת קופון/הנחה משלה ועוקבת אחרי הביצועים בזמן אמת.

| יכולת | תיאור |
|-------|--------|
| **התחברות** | כניסה עם אימייל + סיסמה לדשבורד ייעודי |
| **דשבורד** | סקירה מהירה של הביצועים |
| **קופונים** | צפייה בקופונים/הנחות המשויכים אליה |
| **מכירות** | רשימת כל ההזמנות שנעשו עם הקופון שלה |
| **סטטיסטיקות** | סה"כ מכירות, כמות הזמנות, עמלות |
| **החזרים** | צפייה בהחזרים מהזמנות שלה |

**מה המשפיענית רואה בדשבורד:**
```
┌─────────────────────────────────────────────────────┐
│  👑 דשבורד משפיענית                                │
├─────────────────────────────────────────────────────┤
│                                                     │
│  📊 סיכום חודשי                                    │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐            │
│  │ ₪12,500  │ │  28      │ │ ₪1,875   │            │
│  │ מכירות   │ │ הזמנות   │ │ עמלות    │            │
│  └──────────┘ └──────────┘ └──────────┘            │
│                                                     │
│  🎟️ קופון פעיל: NOA20 (20% הנחה)                  │
│                                                     │
│  📋 הזמנות אחרונות                                 │
│  ┌─────────────────────────────────────────┐       │
│  │ #1045 │ ₪320  │ 15.01.26 │ נשלח       │       │
│  │ #1042 │ ₪189  │ 14.01.26 │ בטיפול    │       │
│  │ #1038 │ ₪450  │ 13.01.26 │ נמסר      │       │
│  └─────────────────────────────────────────┘       │
│                                                     │
│  ↩️ החזרים (2 החודש) - ₪120                       │
│                                                     │
└─────────────────────────────────────────────────────┘
```

**מה עושים באדמין (בעל החנות):**
- יצירת משפיענית חדשה עם אימייל + סיסמה
- שיוך קופון/הנחה אוטומטית למשפיענית
- צפייה בכל המשפיעניות והביצועים שלהן
- ניהול עמלות ותשלומים

---

## 📱 מסכי המערכת

### A. אזור פלטפורמה (quickshop.co.il)

```
דפים ציבוריים:
├── /                     → דף נחיתה (Landing Page)
├── /pricing              → מחירון ותוכניות
├── /features             → יכולות הפלטפורמה
├── /templates            → גלריית תבניות
├── /login                → התחברות
└── /register             → הרשמה

אזור Merchant (דורש התחברות):
├── /dashboard                    → סקירה כללית
├── /dashboard/orders             → ניהול הזמנות
│   └── /dashboard/orders/[id]    → פרטי הזמנה
├── /dashboard/products           → ניהול מוצרים
│   ├── /dashboard/products/new   → מוצר חדש
│   └── /dashboard/products/[id]  → עריכת מוצר
├── /dashboard/categories         → ניהול קטגוריות
├── /dashboard/customers          → רשימת לקוחות
├── /dashboard/discounts          → קופונים והנחות
├── /dashboard/analytics          → דוחות ואנליטיקס
└── /dashboard/settings           → הגדרות חנות
    ├── /general                  → שם, לוגו, צבעים
    ├── /domain                   → דומיין מותאם
    ├── /shipping                 → אזורי משלוח
    ├── /payments                 → אמצעי תשלום
    └── /notifications            → התראות

אזור Admin (רק לנו):
├── /admin                        → סקירה כללית
├── /admin/stores                 → כל החנויות
├── /admin/users                  → כל המשתמשים
├── /admin/templates              → ניהול תבניות
└── /admin/billing                → חיובים
```

### B. אזור משפיענית (store.quickshop.co.il/influencer)

```
אזור Influencer (דורש התחברות):
├── /influencer                       → דשבורד ראשי
│   ├── סיכום: מכירות, הזמנות, עמלות
│   ├── גרף ביצועים לפי תקופה
│   └── הזמנות אחרונות
├── /influencer/coupons               → הקופונים/הנחות שלי
│   ├── קופונים פעילים
│   ├── היסטוריית קופונים
│   └── סטטיסטיקות לכל קופון
├── /influencer/sales                 → מכירות
│   ├── רשימת כל ההזמנות
│   ├── פילטר לפי תאריך
│   └── סינון לפי קופון
├── /influencer/refunds               → החזרים
│   ├── רשימת החזרים מהזמנות שלי
│   └── השפעה על העמלות
├── /influencer/commissions           → עמלות
│   ├── עמלות שהורווחו
│   ├── עמלות ממתינות לתשלום
│   └── היסטוריית תשלומים
└── /influencer/settings              → הגדרות
    ├── פרטים אישיים
    ├── שינוי סיסמה
    └── הגדרות התראות
```

### C. אזור חנות (store.quickshop.co.il או custom domain)

```
חנות:
├── /                             → דף בית החנות
├── /products                     → קטלוג מוצרים
│   └── /products?category=xxx    → סינון לפי קטגוריה
├── /products/[slug]              → דף מוצר
├── /cart                         → עגלת קניות
├── /checkout                     → תהליך רכישה
│   ├── /checkout/shipping        → פרטי משלוח
│   └── /checkout/payment         → תשלום
├── /order/[id]                   → אישור הזמנה
├── /account                      → חשבון לקוח (אופציונלי)
│   └── /account/orders           → הזמנות קודמות
├── /search                       → תוצאות חיפוש
└── /pages/[slug]                 → דפי תוכן (אודות, מדיניות)
```

---

## 🎨 תבניות (Templates)

### מה זה תבנית?
```
תבנית = עיצוב מוכן לחנות
• Layout (פריסה)
• צבעים ופונטים
• סגנון כרטיסי מוצר
• עיצוב דף מוצר
• עיצוב עגלה וצ'קאאוט
```

### תבניות מתוכננות:

| שם | סגנון | מתאים ל |
|----|-------|---------|
| **Clean** | מינימליסטי, לבן | כל סוג חנות |
| **Bold** | צבעוני, מודרני | אופנה, אקססוריז |
| **Elegant** | יוקרתי, כהה | תכשיטים, פרימיום |
| **Fresh** | צעיר, חי | מזון, קוסמטיקה |
| **Tech** | טכני, נקי | אלקטרוניקה |

### Phase 1: תבנית "Clean" בלבד

---

## 💳 מודל עסקי

### תוכניות מחירים:

| תוכנית | מחיר | יכולות |
|--------|------|--------|
| **Free** | ₪0 | 10 מוצרים, subdomain בלבד |
| **Basic** | ₪49/חודש | 100 מוצרים, דומיין מותאם |
| **Pro** | ₪149/חודש | אנלימיטד, דוחות מתקדמים |
| **Enterprise** | בהתאמה | API, תמיכה VIP |

### עמלות:
- **Free**: 3% מכל מכירה
- **Basic**: 2% מכל מכירה
- **Pro**: 1% מכל מכירה
- **Enterprise**: 0%

---

## 🔐 Authentication

### Merchants (בעלי חנויות):
- Email + Password
- Google OAuth
- Session ב-Database (לא JWT)

### Customers (קונים):
- Guest checkout (בלי הרשמה)
- Email + Password (אופציונלי)
- Magic link (אופציונלי)

---

## 💰 תשלומים

### Phase 1 (MVP):
- ללא תשלום אמיתי
- סימולציה של תהליך

### Phase 2:
- **Stripe** - כרטיסי אשראי
- **PayPal** - אופציה נוספת

### Phase 3:
- **Stripe Connect** - תשלומים ישירות לסוחרים
- **Apple Pay / Google Pay**
- **בזמן אמת** - bit, PayBox

---

## 📦 משלוחים

### Phase 1:
- הגדרה ידנית של מחירים
- מחיר קבוע / לפי סכום הזמנה / חינם מעל X

### Phase 2:
- אזורי משלוח (צפון, מרכז, דרום)
- חיבור לחברות משלוחים (Baldar, Cheetah)
- נקודות איסוף

---

## 📊 Analytics & Reports

### Dashboard Overview:
- מכירות היום / השבוע / החודש
- הזמנות ממתינות
- מוצרים אזלו מהמלאי
- גרף מכירות

### דוחות:
- מכירות לפי תקופה
- מוצרים הכי נמכרים
- לקוחות חוזרים
- שיעור המרה (צפיות → רכישות)
- עגלות נטושות

---

## 📁 מבנה תיקיות

```
quickshop/
├── src/
│   ├── app/
│   │   ├── (marketing)/              # דפי שיווק (landing, pricing)
│   │   │   ├── page.tsx
│   │   │   ├── pricing/
│   │   │   └── features/
│   │   │
│   │   ├── (auth)/                   # התחברות/הרשמה
│   │   │   ├── login/
│   │   │   └── register/
│   │   │
│   │   ├── (dashboard)/              # אזור סוחר
│   │   │   ├── layout.tsx            # Sidebar + Header
│   │   │   ├── dashboard/
│   │   │   │   ├── page.tsx          # Overview
│   │   │   │   ├── products/
│   │   │   │   ├── orders/
│   │   │   │   ├── customers/
│   │   │   │   ├── discounts/
│   │   │   │   ├── analytics/
│   │   │   │   └── settings/
│   │   │
│   │   ├── (admin)/                  # אזור אדמין פלטפורמה
│   │   │   └── admin/
│   │   │
│   │   └── (store)/                  # אזור חנות (multi-tenant)
│   │       ├── layout.tsx            # Store layout
│   │       ├── page.tsx              # Store home
│   │       ├── products/
│   │       ├── cart/
│   │       ├── checkout/
│   │       └── account/
│   │
│   ├── components/
│   │   ├── ui/                       # Shadcn/ui components
│   │   ├── dashboard/                # Dashboard components
│   │   ├── store/                    # Store components
│   │   └── shared/                   # Shared components
│   │
│   ├── lib/
│   │   ├── db/
│   │   │   ├── index.ts              # Drizzle client
│   │   │   ├── schema.ts             # All tables
│   │   │   └── queries/              # Reusable queries
│   │   ├── auth/
│   │   │   └── index.ts              # NextAuth config
│   │   ├── stripe/                   # Stripe integration
│   │   └── utils/
│   │
│   ├── actions/                      # Server Actions
│   │   ├── products.ts
│   │   ├── orders.ts
│   │   ├── cart.ts
│   │   └── auth.ts
│   │
│   └── types/                        # TypeScript types
│
├── drizzle/                          # Migrations
├── public/
│   └── templates/                    # Template assets
├── .env.local
├── drizzle.config.ts
├── middleware.ts                     # Multi-tenant routing
├── tailwind.config.ts
└── package.json
```

---

## 🔀 Multi-Tenant Architecture

### איך זה עובד?

```
Request: store1.quickshop.co.il/products

middleware.ts:
1. מזהה את ה-subdomain (store1)
2. שולף את החנות מה-DB
3. מעביר את store_id ל-headers
4. הדף מקבל את החנות הנכונה

Request: mycoolshop.com/products

middleware.ts:
1. מזהה שזה custom domain
2. מחפש ב-DB איזו חנות מחוברת לדומיין
3. אותו תהליך
```

### Middleware Logic:
```typescript
// middleware.ts
export async function middleware(request: NextRequest) {
  const hostname = request.headers.get('host')
  
  // בדיקה אם זה subdomain
  const subdomain = hostname?.split('.')[0]
  
  // בדיקה אם זה custom domain
  // ...
  
  // הוספה ל-headers
  request.headers.set('x-store-slug', subdomain)
}
```

---

## 🚀 שלבי פיתוח

### Phase 1 - MVP (2-3 שבועות)
- [x] אפיון וסכמה
- [ ] Setup: Next.js + Drizzle + Neon
- [ ] Auth: הרשמה/התחברות
- [ ] Dashboard בסיסי
- [ ] CRUD מוצרים (בלי וריאנטים)
- [ ] CRUD קטגוריות
- [ ] חנות בסיסית עובדת
- [ ] Multi-tenant (subdomains)
- [ ] עגלת קניות
- [ ] Checkout פשוט (בלי תשלום)

### Phase 2 - Essential (2-3 שבועות)
- [ ] וריאנטים (צבע, מידה)
- [ ] קופונים והנחות
- [ ] ניהול הזמנות מלא
- [ ] לקוחות
- [ ] תבנית "Clean" מושלמת
- [ ] Custom domains
- [ ] תמונות (Vercel Blob)
- [ ] 👑 משפיענים - ניהול + דשבורד ייעודי
- [ ] שיוך קופון/הנחה למשפיען

### Phase 3 - Launch (2-3 שבועות)
- [ ] תשלומים (Stripe)
- [ ] דוחות ואנליטיקס
- [ ] הגדרות משלוח
- [ ] אימייל התראות
- [ ] SEO מתקדם

### Phase 4 - Growth
- [ ] תבניות נוספות
- [ ] עגלות נטושות
- [ ] מנוי Stripe
- [ ] API לאינטגרציות
- [ ] אפליקציה / Marketplace

---

## ⚡ ביצועים - Target Metrics

| מדד | יעד |
|-----|-----|
| **LCP** (Largest Contentful Paint) | < 1.5s |
| **FID** (First Input Delay) | < 100ms |
| **CLS** (Cumulative Layout Shift) | < 0.1 |
| **TTFB** (Time to First Byte) | < 200ms |
| **Page Load** | < 2s |

### איך נשיג את זה:
1. Server Components - אין JS מיותר
2. ISR - דפים מוכנים מראש
3. Neon pooling - DB מהיר
4. Vercel Edge - קרוב למשתמש
5. תמונות אופטימיזציה - next/image

---

## 🔜 הבא: סכמת Database

ראה `DATABASE.md` לסכמה המלאה
